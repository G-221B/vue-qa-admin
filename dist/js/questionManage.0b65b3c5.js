(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["questionManage"],{"0860":function(e,t,n){},"08cb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"question_manage"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.query}},[n("el-form-item",{attrs:{label:"id"}},[n("el-input",{attrs:{placeholder:"id"},model:{value:e.query.id,callback:function(t){e.$set(e.query,"id",t)},expression:"query.id"}})],1),n("el-form-item",{attrs:{label:"提问者"}},[n("el-input",{attrs:{placeholder:"提问者"},model:{value:e.query.user,callback:function(t){e.$set(e.query,"user",t)},expression:"query.user"}})],1),n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{placeholder:"标题"},model:{value:e.query.title,callback:function(t){e.$set(e.query,"title",t)},expression:"query.title"}})],1),n("el-form-item",{attrs:{label:"活动区域"}},[n("el-select",{attrs:{placeholder:"分区"},model:{value:e.query.t_id,callback:function(t){e.$set(e.query,"t_id",t)},expression:"query.t_id"}},[n("el-option",{attrs:{label:"全部",value:void 0}}),e._l(e.type,(function(e){return n("el-option",{key:e.question_tid,attrs:{label:e.type_name,value:e.question_tid}})}))],2)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onQuery}},[e._v("查询")])],1)],1),n("Result",{attrs:{question:e.question},on:{delete:e.deleteQuestions}}),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:10*e.pageCount,"hide-on-single-page":!0},on:{"current-change":e.pageChange}})],1)},r=[],a=(n("96cf"),n("1da1")),s=n("5c96"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"result"},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.deleteSelect}},[e._v("删除所选行")]),n("el-table",{ref:"questionRef",attrs:{data:e.formatQuestion,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{prop:"q_id",label:"id",align:"center",width:"80px"}}),n("el-table-column",{attrs:{prop:"username",label:"提问者",align:"center"}}),n("el-table-column",{attrs:{prop:"type_name",label:"类型",align:"center"}}),n("el-table-column",{attrs:{prop:"q_title",label:"标题",align:"center"}}),n("el-table-column",{attrs:{prop:"q_time",label:"发布日期",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.getDetail(t.$index)}}},[e._v("查看详情")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"问题详情",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},o=[],l=(n("4160"),n("d81d"),n("159b"),n("ed08")),c={data:function(){return{dialogVisible:!1,content:""}},props:["question"],computed:{formatQuestion:function(){return this.question.map((function(e){return e.q_time=Object(l["a"])(e.q_time),e}))}},methods:{deleteSelect:function(){var e=[];this.$refs.questionRef.selection.forEach((function(t){e.push(t.q_id)})),this.$emit("delete",e)},handleDelete:function(e){var t=[this.question[e].q_id];this.$emit("delete",t)},getDetail:function(e){this.dialogVisible=!0,this.content=this.question[e].q_content}}},d=c,p=(n("843b"),n("2877")),m=Object(p["a"])(d,u,o,!1,null,"5048777a",null),f=m.exports,g=n("6f05"),h={data:function(){return{query:{id:"",username:"",t_id:"",title:""},type:[],pageNum:1,pageCount:0,question:[]}},components:{Result:f},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getType(),e.getQuestion(e.query.id,e.query.username,e.query.t_id,e.query.title,e.pageNum);case 2:case"end":return t.stop()}}),t)})))()},methods:{onQuery:function(){this.pageNum=1,this.getQuestion(this.query.id,this.query.username,this.query.t_id,this.query.title,this.pageNum),this.clear()},pageChange:function(e){this.pageNum=e,this.getQuestion(this.query.id,this.query.username,this.query.t_id,this.query.title,this.pageNum)},deleteQuestions:function(e){var t=this;this.$confirm("此操作将永久删除该提问, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["d"])(e);case 2:i=n.sent,0===i.status&&(t.clear(),t.pageNum=1,t.getQuestion(t.query.id,t.query.username,t.query.t_id,t.query.title,t.pageNum),s["Message"].success({type:"success",message:"删除成功"}));case 4:case"end":return n.stop()}}),n)})))).catch((function(e){console.log(e),t.$message({type:"info",message:"已取消删除"})}))},clear:function(){this.query.id="",this.query.username="",this.query.t_id="",this.query.title=""},getQuestion:function(e,t,n,i,r){var s=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(g["k"])(e,t,n,i,r);case 2:u=a.sent,0===u.status&&(s.pageCount=u.data.pageCount,s.question=u.data.question);case 4:case"end":return a.stop()}}),a)})))()},getType:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["f"])();case 2:n=t.sent,0===n.status&&(e.type=n.data.question_type);case 4:case"end":return t.stop()}}),t)})))()}}},y=h,b=(n("7d2e"),Object(p["a"])(y,i,r,!1,null,"4f41cb9a",null));t["default"]=b.exports},"1dde":function(e,t,n){var i=n("d039"),r=n("b622"),a=n("2d00"),s=r("species");e.exports=function(e){return a>=51||!i((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"7d2e":function(e,t,n){"use strict";n("0860")},"843b":function(e,t,n){"use strict";n("e58b")},d81d:function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").map,a=n("1dde"),s=n("ae40"),u=a("map"),o=s("map");i({target:"Array",proto:!0,forced:!u||!o},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e58b:function(e,t,n){}}]);